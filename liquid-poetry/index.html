<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liquid Poetry Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #0a0015 0%, #1a0033 100%);
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            cursor: crosshair;
        }

        .controls {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 12px;
            color: white;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 280px;
        }

        .controls h3 {
            margin: 0 0 15px 0;
            font-size: 18px;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6ec7, #7873f5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 13px;
            opacity: 0.9;
            font-weight: 500;
        }

        .mood-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 15px;
        }

        button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        button:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        button.active {
            background: linear-gradient(45deg, #ff6ec7, #7873f5);
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(120, 115, 245, 0.4);
        }

        input[type="text"] {
            width: 100%;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 13px;
            margin-bottom: 8px;
        }

        input[type="text"]::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #7873f5;
            background: rgba(255, 255, 255, 0.15);
        }

        .add-word-btn {
            width: 100%;
            background: linear-gradient(45deg, #7873f5, #ff6ec7);
            padding: 12px;
            font-weight: 600;
        }

        .info {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-size: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 250px;
            line-height: 1.6;
        }

        .back-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            background: #ff4444;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .back-button:hover {
            background: #ff6666;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 68, 68, 0.4);
        }

        .clear-btn {
            width: 100%;
            background: rgba(255, 68, 68, 0.3);
            border-color: rgba(255, 68, 68, 0.5);
        }

        .clear-btn:hover {
            background: rgba(255, 68, 68, 0.5);
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="controls">
        <h3>Liquid Poetry</h3>

        <div class="control-group">
            <label>Mood</label>
            <div class="mood-buttons">
                <button class="mood-btn active" data-mood="calm">Calm</button>
                <button class="mood-btn" data-mood="dreamy">Dreamy</button>
                <button class="mood-btn" data-mood="turbulent">Turbulent</button>
                <button class="mood-btn" data-mood="chaos">Chaos</button>
            </div>
        </div>

        <div class="control-group">
            <label>Add Your Words</label>
            <input type="text" id="wordInput" placeholder="Type a word or phrase...">
            <button class="add-word-btn" id="addWordBtn">Add to Poetry</button>
        </div>

        <div class="control-group">
            <button class="clear-btn" id="clearBtn">Clear Canvas</button>
        </div>
    </div>

    <div class="info">
        Watch words flow like liquid ink<br>
        Move your mouse to create ripples<br>
        Words merge and blend into poetry<br>
        Click to add energy bursts
    </div>

    <a href="../index.html" class="back-button">Back to Experiments</a>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // Set canvas size
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Poetic word pool
        const poeticWords = [
            'dream', 'whisper', 'echo', 'shadow', 'light', 'moon', 'star', 'ocean',
            'breath', 'silence', 'memory', 'wonder', 'floating', 'drift', 'shimmer',
            'cascade', 'velvet', 'crystal', 'azure', 'ember', 'mist', 'twilight',
            'eternity', 'gentle', 'ripple', 'flow', 'serene', 'cosmic', 'infinite',
            'bloom', 'fade', 'dance', 'linger', 'transcend', 'spiral', 'luminous'
        ];

        // Particle class for text
        class TextParticle {
            constructor(text, x, y) {
                this.text = text;
                this.x = x;
                this.y = y;
                this.vx = (Math.random() - 0.5) * 2;
                this.vy = (Math.random() - 0.5) * 2;
                this.size = 16 + Math.random() * 24;
                this.alpha = 0.7 + Math.random() * 0.3;
                this.rotation = Math.random() * Math.PI * 2;
                this.rotationSpeed = (Math.random() - 0.5) * 0.02;
                this.hue = Math.random() * 60 + 260; // Purple to pink range
                this.pulseOffset = Math.random() * Math.PI * 2;
                this.life = 1;
            }

            update(mood, mouseX, mouseY) {
                // Physics based on mood
                const settings = moodSettings[mood];

                // Apply velocity
                this.x += this.vx * settings.speed;
                this.y += this.vy * settings.speed;

                // Add turbulence
                this.vx += (Math.random() - 0.5) * settings.turbulence;
                this.vy += (Math.random() - 0.5) * settings.turbulence;

                // Damping
                this.vx *= settings.damping;
                this.vy *= settings.damping;

                // Flow field effect
                const angle = Math.sin(this.x * 0.01 + time * 0.5) + Math.cos(this.y * 0.01 + time * 0.3);
                this.vx += Math.cos(angle) * settings.flowStrength;
                this.vy += Math.sin(angle) * settings.flowStrength;

                // Mouse interaction - ripple effect
                const dx = mouseX - this.x;
                const dy = mouseY - this.y;
                const dist = Math.sqrt(dx * dx + dy * dy);

                if (dist < 200 && dist > 0) {
                    const force = (200 - dist) / 200 * settings.mouseForce;
                    this.vx -= (dx / dist) * force;
                    this.vy -= (dy / dist) * force;
                }

                // Rotation
                this.rotation += this.rotationSpeed;

                // Boundary wrapping
                if (this.x < -100) this.x = canvas.width + 100;
                if (this.x > canvas.width + 100) this.x = -100;
                if (this.y < -100) this.y = canvas.height + 100;
                if (this.y > canvas.height + 100) this.y = -100;

                // Pulse effect
                this.pulseOffset += 0.05;
            }

            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);

                // Glow effect
                const pulse = Math.sin(this.pulseOffset) * 0.3 + 0.7;
                const glowSize = this.size * 2;

                const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, glowSize);
                gradient.addColorStop(0, `hsla(${this.hue}, 80%, 70%, ${this.alpha * 0.3 * pulse})`);
                gradient.addColorStop(0.5, `hsla(${this.hue}, 70%, 60%, ${this.alpha * 0.1 * pulse})`);
                gradient.addColorStop(1, `hsla(${this.hue}, 60%, 50%, 0)`);

                ctx.fillStyle = gradient;
                ctx.fillRect(-glowSize, -glowSize, glowSize * 2, glowSize * 2);

                // Text with gradient
                ctx.font = `${this.size}px "Georgia", serif`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';

                // Text gradient
                const textGradient = ctx.createLinearGradient(-50, -50, 50, 50);
                textGradient.addColorStop(0, `hsla(${this.hue}, 90%, 80%, ${this.alpha})`);
                textGradient.addColorStop(1, `hsla(${this.hue + 30}, 90%, 70%, ${this.alpha})`);

                ctx.fillStyle = textGradient;
                ctx.fillText(this.text, 0, 0);

                // Subtle shadow for depth
                ctx.shadowColor = `hsla(${this.hue}, 80%, 60%, 0.5)`;
                ctx.shadowBlur = 10;
                ctx.fillText(this.text, 0, 0);

                ctx.restore();
            }
        }

        // Mood settings
        const moodSettings = {
            calm: {
                speed: 0.3,
                turbulence: 0.05,
                damping: 0.98,
                flowStrength: 0.1,
                mouseForce: 0.5
            },
            dreamy: {
                speed: 0.5,
                turbulence: 0.15,
                damping: 0.95,
                flowStrength: 0.3,
                mouseForce: 0.8
            },
            turbulent: {
                speed: 1.0,
                turbulence: 0.4,
                damping: 0.92,
                flowStrength: 0.5,
                mouseForce: 1.5
            },
            chaos: {
                speed: 1.5,
                turbulence: 0.8,
                damping: 0.90,
                flowStrength: 0.8,
                mouseForce: 2.5
            }
        };

        // State
        let particles = [];
        let time = 0;
        let currentMood = 'calm';
        let mouseX = canvas.width / 2;
        let mouseY = canvas.height / 2;

        // Initialize with some words
        function initializeParticles() {
            particles = [];
            for (let i = 0; i < 25; i++) {
                const word = poeticWords[Math.floor(Math.random() * poeticWords.length)];
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                particles.push(new TextParticle(word, x, y));
            }
        }

        // Add word
        function addWord(word) {
            if (word.trim()) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                particles.push(new TextParticle(word.trim(), x, y));
            }
        }

        // Animation loop
        function animate() {
            // Fade trail effect
            ctx.fillStyle = 'rgba(10, 0, 21, 0.15)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Update and draw particles
            particles.forEach((particle, index) => {
                particle.update(currentMood, mouseX, mouseY);
                particle.draw();

                // Remove old particles if too many
                if (particles.length > 50 && Math.random() < 0.01) {
                    particles.splice(index, 1);
                }
            });

            time += 0.01;
            requestAnimationFrame(animate);
        }

        // Mouse interaction
        canvas.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });

        canvas.addEventListener('click', (e) => {
            // Create burst of particles on click
            for (let i = 0; i < 5; i++) {
                const word = poeticWords[Math.floor(Math.random() * poeticWords.length)];
                const angle = (Math.PI * 2 / 5) * i;
                const particle = new TextParticle(word, e.clientX, e.clientY);
                particle.vx = Math.cos(angle) * 3;
                particle.vy = Math.sin(angle) * 3;
                particles.push(particle);
            }
        });

        // Controls
        document.querySelectorAll('.mood-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentMood = btn.dataset.mood;
            });
        });

        document.getElementById('addWordBtn').addEventListener('click', () => {
            const input = document.getElementById('wordInput');
            addWord(input.value);
            input.value = '';
        });

        document.getElementById('wordInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const input = document.getElementById('wordInput');
                addWord(input.value);
                input.value = '';
            }
        });

        document.getElementById('clearBtn').addEventListener('click', () => {
            particles = [];
            ctx.fillStyle = 'rgba(10, 0, 21, 1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        });

        // Start
        initializeParticles();
        animate();
    </script>
</body>
</html>
